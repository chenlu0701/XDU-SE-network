# 计网复习知识点整理

## 第1章 绪论

1.数据通信的概念及模型

数据通信是在两台设备之间通过诸如线缆的某种形式的传输介质进行的数据交换。

【数据通信系统模型】——五个组成部分

> 报文：进行通信的信息（数据）
> 发送方：发送数据报文的设备
> 接收方：接受报文的设备
> 传输介质：报文从发送方到接收方之间所经过的物理通路
> 协议：管理数据通信的一组规则，表示通信设备之间的一组约定

2.数据流

数据流：单工、半双工、全双工

单工模式（Simplex Mode)：通信是单方向的，两台设备只有一台能够发送，另一台则只能接受
半双工模式（Half-duplex Mode)：每台主机均能发送和接受，但不能同时进行
全双工模式（Full-duplex Mode)：双方主机都能同时发送和接受
3.计算机网络的概念

计算机网络：是一个将分散的，具有独立功能的计算机系统，通过通信设备和线路，由功能完善的软件实现资源共享和信息传递

4.网络的三个准则

性能，可靠性，安全性

**性能**
性能（performance）可以用多种方式来衡量，包括传输时间和响应时间。传输时间是指报文从一台设备传输到另一台设备所需的时间。响应时间是指请求和响应之间所花费的时间。网络性能取决于多种因素，包括用户的数量、传输介质类型、所连接的硬件的能力以及软件的效率。
性能通常由网络两个因素：吞吐量（throughput）和延迟（delay）来度量。需要更多吞吐量和较小的延迟时间，但是这两个准则时常是矛盾的。如果想要在网络上发送更多的数据用来增加吞吐量，但由于网络通信量的拥塞，增加了延迟时间。

**可靠性**

除了传输的准确性之外，网络的可靠性（reliability）用故障出现的频率、一条链路从故障恢复所花费的时间、在灾难中的健壮性来衡量。

**安全性**

网络的安全性（security）包括保护数据免受未授权的访问，保护数据在传输过程中免受攻击，和数据丢失与损伤的恢复策略和方法。

5.链路（Link）的概念

网络是通过链路连接在一起的两台或两台以上的设备。**链路是将数据由一台设备传输到另一台设备的通信通路。**为了更直观地说明问题，最简单的情形，可以将链路想象为在两点之间连接的线。要想建立通信，两台设备必须以某种方式在同一时间连接到同一链路上。有两种可能的连接方式：点到点方式和多点方式。

6.拓扑结构

拓扑结构：网状、星型、总线、环状

7.网络模型的概念

计算机网络是由许多实体组成，需要标准协调网络之间的通信。最著名的两个标准是OSI模型和因特网模型。

8.网络分类

网络分类：局域网、城域网、广域网

| 网络      | 规模      | 介质               | 拓扑结构                     |
| --------- | --------- | ------------------ | ---------------------------- |
| 局域网LAN | 小于2英里 | 一种类型的传输介质 | 总线结构、环状结构和星型结构 |
| 城域网MAN | 十几英里  |                    |                              |
| 广域网WAN | 世界范围  |                    |                              |

9.协议的概念和三个要素

协议是用来管理数据通信的一组规则。协议规定了通信的内容，通信的方式和通信的时间。

【协议三要素】

> 语法：指数据的结构或格式，即它们是以何种顺序表示的
> 语义：指每一位片段的含义：如何解释一个特别的位模式，讲什么（曼彻斯特编码）
> 时序：报文发送的时间和发送的顺序

## 第2章 网络模型

1.分层的概念

计算机是个非常复杂的系统, “分层”可将庞大复杂的问题转化为若干较小的局部问题.

### **2.OSI参考模型的概念和各层功能**

物理层：负责数据的物理传输，包括电缆、接口等硬件。
数据链路层：提供错误检测和纠正，处理节点间的数据传输。
网络层：负责数据包的路由选择和转发。
传输层：提供端到端的数据传输，确保数据完整性和正确顺序。
会话层：管理和控制会话的建立、维护和终止。
表示层：负责数据的编码、解码和加密解密。
应用层：为应用程序提供网络服务接口，例如HTTP、FTP等协议。

**物理层：负责位从一个节点到另一个节点的传递**

> 位的表示：要进行位流的传输必须将位编码成信号——电信号或光信号（物理层定义编码的类型）
> 数据速率：定义传输速率（每秒发送的位数）
> 位同步：发送方与接收方不仅使用相同的比特率还必须位同步保证时钟同步
> 线路配置：点到点连接或多点共享连接
> 物理拓扑结构：定义设备连接成网络的连接方式（网状、星型、总线、环状）
> 传输方式：定义两台设备之间的传输方式（单工、半双工和全双工）

**数据链路层：负责帧从一跳到下一跳的传递**

> 成帧：数据链路层将接收到的来自网络层的位流分成称为帧的易处理数据单元
> 物理寻址：1、不同系统 数据链路层在帧的头部添加发送方的物理地址和接收方的物理地址 2、不同网络 数据链路层在帧的头部添加发送方的物理地址和连接下一个网络的路由地址
> 流量控制：采用流量控制机制防止接收方过载
> 差错控制：检测与重发损坏帧或丢失帧

**网络层：负责将各个分组从源地址传递到目的地址**

> 逻辑寻址：物理寻址负责处理本地网络寻址问题（数据链路层），逻辑寻址负责处理分组通过网络边界的寻址问题
> 路由选择：在互联网中由连接设备（路由器或网关）负责把分组送到指定网络的目的地

**传输层：负责一个报文从一个进程到另一个进程的传递**

> 端口寻址：传输层信息的头部必须包含端口地址（服务点地址），将整个报文传送到计算机上的指定进程
> 分段和组装：将报文分解成可传输的片段并进行编号，使得1、传输层可以在接收端将报文正确地组装 2、用来标识和替换传输中丢失的分组
> 连接控制：传输层可以是无连接的或面向连接的
> 流量控制：负责端到端上的流量控制而不是单条链路
> 差错控制：负责进程到进程上的差错控制而不是单条链路上

**会话层：负责对话控制和同步**

> 对话控制：允许两个进程之间以半双工或全双工方式进行通信
> 同步：会话层允许一个进程在数据流中增加检查点或同步点

**表示层：负责翻译、加密和压缩数据**
**应用层：负责向用户提供服务**

### **3.TCP/IP协议簇和各层的功能**

![image-20241211091014174](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211091014174.png)

TCP/IP协议族
【层次组成】：物理层和数据链路层 或 主机到网络层、网络层、传输层和应用层

网络接口层（Link Layer）：处理局域网中的数据传输，包括物理层和数据链路层功能。
网际层（Network Layer）：主要包括IP协议，负责数据包的路由和转发。
传输层（Transport Layer）：包括TCP和UDP协议，负责数据传输的可靠性和流量控制。
应用层（Application Layer）：涵盖了所有网络应用协议，例如HTTP、FTP、SMTP等。

**网络层**

> IP协议：不可靠、无连接、主机到主机协议
> 组成部分：
>
> 地址解析协议（ARP)：将**逻辑地址与物理地址**联系起来
> 逆地址解析协议（RARP)：允许主机在仅知道物理地址的情况下寻找因特网地址
> 因特网控制报协议（ICMP)：用来向发送方**通知数据报所发生的问题**
> 因特网组报文协议（IGMP)：用于将一个报文发送给一组接收者

**传输层**

> 用户数据报协议（UDP)：进程到进程的协议即端到端的协议
> 传输控制协议（TCP)：是**面向连接的、可靠的流**传输协议
> 流控制传输协议（SCTP）

**TCP/IP 协议族和OSI/RM的异同：**

TCP/IP 协议族和OSI/RM有很多相似之处：基于独立的协议栈的概念：采取分层体系结构，各层的功能也大体相似。

1.OSI/RM使服务、接口和协议这3个概念之间的区别明确化了，其思想和现代的面向对象程序设计思想非常吻合。TCP/IP 参考模型最初没有明确区分服务、接口和协议，虽然后来人们试图改进它以便接近于 OSI参考模型。**因此，OSI/RM中的协议比 TCP/IP 中的协议具有更好的隐藏性，在技术发生变化时能相对比较容易地替换掉。**
2.OSI/RM产生在协议发明之前，**不偏向于任何特定的协议，通用性良好**。TCP/IP 参考模型则是对已有的TCP/P 协议族的描述，**并不适合于描述任何其他的协议栈。**
3.两个模型**所拥有的层的数量也不同**：**OSIRM 有7层，而TCP/P 模型只有4层。**它们都有（互联）网络层、传输层和应用层，但其他层并不相同。
4.另一个差别是**面向连接的和无连接的通信**。OSI 参考模型在网络层支持无连接和面向连接的通信，在传输层仅有面向连接的通信。而TCP/IP 参考模型在网络层仅有一种无连接的通信模式，在传输层却支持无连接和面向连接两种模式。

![image-20250104214249282](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20250104214249282.png)

### **4.地址：物理地址、逻辑地址和端口地址**

【物理（链路）地址（MAC地址）】

用于**物理层和数据链路层**
以太网中使用6个字节（48位）物理地址，标明在网卡上，长度格式可变

在数据包的传输过程中，**物理地址是动态变化的**。

【逻辑（IP）地址】

用于网络层
因特网的逻辑地址是32位地址，唯一地标识了连接到因特网上的一台主机

【端口地址】

用于传输层
赋予进程的标识符称为端口地址，长度固定16位地址

跳到跳时物理地址将改变，但逻辑地址和端口地址保持不变。源 IP 地址始终是发送方设备的 IP 地址。目标 IP 地址始终是接收方设备的 IP 地址。

【专用地址】

用于应用层

## **第3章** 数据和信号

1．数字信号：基带传输、低通通道、宽带传输的概念

数字信号是无穷大带宽的复合模拟信号

基带传输：通过通道发送数字信号而不转换为模拟信号，即以信号本身的频谱进行传输

>只有存在无穷大或非常大带宽的低通通道，保持数字信号形状的数字信号基带传输才是可能的。
>
>只能用带宽下限频率为0的低通通道
>在基带传输中，所需的带宽与比特率成正比

假设我们有比特率为N的数字信号，如果我们想发送模拟信号大致近似这个信号，我们需要频率为f=N/2的模拟信号。只有这个频率不能模拟出所有模式，我们需要更多的成分，最大频率为N/2.

大致近似（第一谐波频率）  带宽N/2

如果使用第一第三第五谐波，带宽为5N/2

![image-20241211094522048](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211094522048.png)

宽带传输：宽带传输或调制把数字信号转换成模拟信号进行传输

> 调制允许使用带通通道，即带宽不从0开始的通道。如果可用通道是带通通道，我们需要在传输前把数字信号转换成模拟信号。
>
> 低通通道：可以看作是较低频率从0开始的带通通道
>
> 发送模拟信号用带通通道

2．传输减损：衰减、失真、噪声和

### **信噪比**的概念

![image-20241211095558110](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211095558110.png)

### **3.数据速率限制：奈奎斯特速率、香农容量定理**

奈奎斯特速率: 理想低通信道的最高码元传输速率  L是电平数  B是带宽

根据奈奎斯特定理（Nyquist Theorem），采样率应至少是信号**最高频率**的 **两倍**，才能避免混叠现象。

香农公式定义了噪声通道理论上的最高数据速率

![image-20241211095659102](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211095659102.png)

### 4.性能：**带宽、吞吐量**、延迟、**最大链路利用率、传播时间、传输时间**、**最大数据速率**、排队时间、带宽延迟积的概念和计算

带宽指单位时间能通过链路的数据量，通常以bit/s或**bps**来表示，即每秒可传输之位数。

![image-20241211100733418](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211100733418.png)

![](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214100633.jpg)

![image-20241211101429227](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211101429227.png)

![image-20241211103730555](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211103730555.png)

利用率分为链路利用率和网络利用率，分别指**某条**链路被利用的**时间百分比**和网络中**所有链路利用率的加权平均**。

**最大链路利用率=数据传输时间/发送周期**

其中，发送周期指的是从发送第一个数据帧开始，到接收到确认帧的时间，包括发送方（传输时延+传播时延）+接收方（传输时延+传播时延）。

![image-20241211105308432](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211105308432.png)

**最大数据速率**

奈奎斯特速率: 理想低通信道的最高码元传输速率      比特率=2x带宽xlog2L    L表示数据的信号电平数量

香农公式定义了噪声通道理论上的最高数据速率        通道容量=带宽xlog2（1+SNR）

![image-20241211112833101](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211112833101.png)

## **第4章 数字传输**

1．线路编码：数据元素、信号元素、数据速率、信号速率、最小带宽、最大数据速率、直流分量、自同步

![image-20241211113344323](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211113344323.png)

**直流分量**(DCComponents)：频谱会产生很低的频率。这些接近于0的频率称之为DC（直流）成分，会给不允许通过低频率的系统或者使用电子耦合的系统（如变压器）带来问题。对于这种问题，我们使用无直流成分的方案。

**自同步**(Self-synchronization)：接收方的位间隔与发送方的位间隔严格对应与匹配，数字信号在传输的数据中包含有定时信息。

### 2．**线路编码方案：单极性编码（NRZ）、极性编码（NRZ-L和NRZ-I）、归零码（RZ）、双相码（Manchester和Differential Manchester）、双极性编码（AMI和伪三进制码）**、**多电平编码（mBnL、2B1Q、8B6T、MLT-3）**（了解）

‌**差分曼彻斯特编码**‌是一种使用中位转变来计时的编码方案，主要用于局域网传输。其基本原理是在每个数据位的中间进行一次电平跳变，这个跳变既作为时钟信号，也作为数据信号。**在每个时钟周期的起始处，跳变表示该比特为0，不跳变则表示该比特为1。‌**

线路编码包括单极性码、极性编码、双极性编码、多电平和多跳变等。

![image-20241211140521638](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211140521638.png)

![image-20241211140544931](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211140544931.png)

![image-20241211142009170](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211142009170.png)

多电平编码是把*m*个数据元素编码成*n*个信号元素的模式，增加了每波特的位数。多电平编码用*m*B*n*L表示，其中*m*表示二进制模式的长度，B表示二进制数据，*n*是信号模式的长度，*L*是信号的电平数。*L*=2时用B替换，*L*=3时用T替换，*L*=4时则用Q替换。

3．块编码：4B/5B、8B10B（了解）

块编码常称为*m*B/*n*B编码技术，把*m*-bit位组变成*n*-bit（*n*>*m*），目的是利用冗余确保同步和差错检测。

4．扰码：B8ZS和HDB3（了解）

![image-20241211143445466](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211143445466.png)

![image-20241211143511080](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211143511080.png)

### **5．脉码调制PCM：采样、量化等级、量化误差**

将模拟数据转换成数字信号有两种方案：脉冲码调制PCM(pulse codemodulation)和Delta调制(deltamodulation).

脉冲编码调制是最常用、最简单的波形编码，它把一个时间连续、取值连续的模拟信号变换成时间离散、取值离散的数字信号后在信道中传输。脉冲编码调制先对模拟信号进行抽样，再对样值幅度量化，然后编码产生数字信号。

![image-20250109202952719](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20250109202952719.png)

首先分析选项A，编码（Encoding）在将数字数据转换为数字信号过程中是必要的。编码是把数据变换成适合在信道中传输的信号形式，通过特定规则将数据映射为对应的信号表示，所以仅编码确实可实现数字数据到数字信号的转换 ，该选项有合理性。
接着看选项B，调制（Modulation）主要是将数字或模拟数据加载到载波上，通常用于**将数字信号转换为模拟信号**或者在不同频段传输等情况，在单纯数字数据到数字信号转换过程中不是必需的。
再看选项C，采样（Sampling）一般是针对模拟信号，**将连续的模拟信号按一定时间间隔取值，转化为离散的数字信号**，这里题干是数字数据转换，并非模拟信号处理，所以采样不符合要求。
最后看选项D，量化（Quantization）也是在**模拟信号数字化过程中，对采样得到的值进行离散化处理**，与本题数字数据转换为数字信号的情境不相关。
综上，选项A正确。

PCM编码器有三个过程：

![img](https://i-blog.csdnimg.cn/blog_migrate/0535b03e3f94d8455e92cba8dbbd5c0d.png)

![image-20241211143724927](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211143724927.png)

![image-20241211144512572](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211144512572.png)

6．Delta调制的概念

数字数据生成：将模拟信号的值与梯形信号的最后一个值比较，如果模拟信号的振幅大，则数字数据下一个位为1，否则为0；
梯形信号生成：如果数字数据下一位为1，则梯形信号的最后 一

个点上移 δ，否则下移δ.
7．传输模式：异步传输、同步传输、并行传输、串行传输的概念

![ ](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211144921872.png)

## 第5章 模拟传输

1．比特率和波特率

![image-20241211145149688](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211145149688.png)

2．数字到模拟转换：（1）ASK的概念及ASK的带宽（2）FSK的概念及BFSK的带宽（3）PSK、BPSK、QPSK和QAM的概念

![image-20241211145441381](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211145441381.png)

3．模拟信号调制：（1）AM、FM和PM的概念（2）AM带宽、FM带宽和PM带宽

![image-20241211150705568](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211150705568.png)

## **第6章 带宽利用**

1．复用：FDM、同步TDM、统计TDM和WDM的概念

![image-20241211151245253](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211151245253.png)

FDM频分复用

原理：将整个可用带宽划分为若干个非重叠的频带，每个频带用于传输一个不同的信号。各个信号通过不同的频率通道同时传输。

一种模拟技术，以链路带宽（以Hz为单位）大于要传输的信号的带宽之和时采用。
防护频带指在通道之间狭长未被使用的带宽，这部分用来隔离信号，防止信号重叠。

> 复用过程：
>
> 将信号调制到不同频率的载波上
> 将调制过的模拟信号叠加成复合信号
> 通过足够带宽的介质发送出去
> 复用分离过程：
>
> 使用滤波器将复合信号分解成组成它的各个信号
> 使用解调器，将信号还原

![img](https://i-blog.csdnimg.cn/direct/01d9d0db6f5c44c7b6b56a424b032349.png)

同步TDM

原理：将时间划分为若干个时间片（时间槽），每个时间片分配给不同的信号或用户。在每个时间片内传输一个信号。

时分复用是一个数字化过程，它允许多个连接共享一条高带宽链路。
TDM是组合多个低速通道为一个高速通道数据的复用技术。

统计TDM
相对于同步TDM而言，在其基础上动态分配时隙。即，只给有用的信号分配时隙。这样以来，在输出端就需要标记时隙分配给了谁，在输入端需要辨别在这个时隙信号是谁的并且还要判断这个信号是否接收结束。为了解决这个问题，就给每个信号加上了接收方地址。
另一方面，由于有了接收方地址，就不需要考虑同步问题（帧级）。

![img](https://i-blog.csdnimg.cn/direct/fba21ec15c484d0488af723de0c654f4.png)

波分复用（WDM）

原理：在光纤通信中，将不同的光波长（频率）用于同时传输不同的数据流。每个波长通道可以看作是一个独立的信道。

用于具有高数据速率传输能力的光缆，是合并多个光信号的模拟多路复用技术

2.数字层次、T1载波、E1载波

![image-20241211152751828](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211152751828.png)

![image-20241211152638354](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211152638354.png)

3．波分和码分的概念（了解）

码分复用(CDM，Code Division Multiplexing)是靠不同的编码来区分各路原始信号的一种复用方式，主要和各种多址技术结合产生了各种接入技术，包括无线和有线接入。例如在多址蜂窝系统中是以信道来区分通信对象的，一个信道只容纳1个用户进行通话，许多同时通话的用户，互相以信道来区分，这就是多址。移动通信系统是一个多信道同时工作的系统，具有广播和大面积覆盖的特点。在移动通信环境的电波覆盖区内，建立用户之间的无线信道连接，是无线多址接入方式，属于多址接入技术。

4．扩频：FHSS和DSSS的概念（了解）

## **第7章 传输介质**

1．导向介质：双绞线、同轴电缆和光纤的概念

![](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214100819.jpg)

![微信图片_20241214100823](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214100823.jpg)

2．无线传输介质：无线波普、无线电波、微波和红外波

无线电波是全方向的，可以传输很长距离的，可以穿透墙体。多用于多播通信。

微波是单向的。用于单播通信。

红外波可以在封闭区域用于短距离通信，使用视线传播。

## **第8章 交换**

1．电路交换的概念

![image-20241211155858076](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211155858076.png)

2．数据报交换的概念   分组交换

![image-20241211155926573](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211155926573.png)

假设待传送数据的总长度为2560位，每个分组的长度为256位，其中头部开销长度为16位，源结点到目的结点之间的链路数为4，每个链路上的延迟时间为0.1S，数据传输率为2560b/s，线路交换建立连接的时间均为0.2s，在分组交换方式下每个中间结点产生25.6位的延迟时间。
（1）求传送所有的数据，线路交换所需时间。    **链路建立时间+链路延迟时间+数据传输时间**

（2） 求传送所有的数据，数据报分组交换所需时间。    **（链路延时时间+中间结点延迟时间+分组传送时间）×分组数**

```tex
本题考查的是线路交换和数据报分组交换两种模式下的数据传输时间的计算。

（1）线路交换，也称为电路交换，其传输时间的计算公式是：链路建立时间+链路延迟时间+数据传输时间。
根据题意，链路建立时间为0.2s；链路延迟时间=链路数×每链路延迟时间=4×0.1=0.4s；数据传输时间=数据总长度/数据传输率=2560位/2560b/s=1s。因此总的传输时间=0.2+0.4+1=1.6s。

（2）采用数据报分组交换形式，其传输时间的计算公式显然是：（链路延时时间+中间结点延迟时间+分组传送时间）×分组数。

根据题意，显然链路延迟时间=链路数×每链路延迟时间=4×0.1=0.4s；
而中间结点延迟时间应=中间结点数×每中间结点延迟时间，中间结点数没有直接给出，但根据源点到目标共有4条链路，就可以得知中间结点应该是4-1=3个，每个中间结点延迟25.6位，因此其延迟时间就是25.6位/2560b/s=0.01，因此中间结点延迟时间就等于3×0.01=0.03s；

而分组传送时间显然就=分组大小/数据传输率=256位/2560b/s=0.1s。这三者之和就是每个分组传输的时间，即0.4+0.03+0.1=0.53s。

最后，我们还要求出分组数，由于每个分组是256位，但其中有16位是头开销，因此实际可以装载的信息只有256-16=240位，而我们的数据报文的长度是2560位，因此其需要打包为11个分组，当然最后一个分组实际上没有达到最大值。因此采用数据报分组交换所需的时间=0.53×11=5.83s。
```

3．虚电路交换的概念

![image-20241211155944707](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211155944707.png)

## **第10章 检错与纠错**

1．差错的类型

【单个位差错】——数据单元仅有一位发生变化
【突发性差错】——数据单元有两位或多位发生变化

2．块编码

![image-20241211160325160](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211160325160.png)

3．差错检测的方法

块编码的差错检测需要满足以下两个条件：

接收方有（或者能够找到）有效码字表。
原来的码字转变为无效码字。
如果满足以上两个条件，那么只要码字在有效码表中查到对应无效码字，那么就直接丢弃。如果出现发生了差错，但是差错依旧是一个有效码字，这是我们无法检测出数据差错。

注：差错检测码是根据某些类型的差错而设计的，因此只能检测到这些类型的差错，其他类型的差错无法被检测到。

### 4．**纠错的概念与方法：汉明距离、最小汉明距离**

纠错相较于差错检测，不仅要知道发生了错误，还需要知道错误发生的位置。

![image-20241211160608834](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211160608834.png)

5．线性块编码：线性块编码的距离、简单奇偶校验编码、两维奇偶校验编码、汉明码

在线性块编码中，任两个有效码字的异或生成另一个有效码字。

线性块编码的距离   可以简单求出，最小汉明距离是非零码字中1的个数。
简单奇偶校验码

编码是n=k+1、最小汉明距离为2的单个位检错码。
在发送方：1的个数是偶数个则为0，否则为1。
在接收方：1的个数是偶数个则接收，否则丢弃。

![微信图片_20241214100437](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214100437.jpg)

两维奇偶校验码
在这种校验码下，所有同长度数据字组成一个二维数组，行和列分别生成一组校验位，通过这两组校验位对错误进行定位。
这种纠错方式可以检测所有三位以下错误。三位及以上有可能被检测出来。

![微信图片_20241214100832](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214100832.jpg)

![image-20241214102950961](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214102950961.png)

码字长 n、数据字长 k 和校验位 r

书中讨论的汉明码，如果在传输中发生两个错误，那么生成的数据字可能不是正确的数据字。
性能：
由于在单个码字中，只能纠正一个错误，所以为了检测帧中的长度为N的突发性错误，可以将帧分为N个码字，然后按表组织，一次发送一列。这样就可以把长度为N的突发性差错分解成单个位差错进行纠错。

### 6．**循环冗余编码CRC（不包含硬件实现）、CRC的检错能力分析**（检测单个位差错、两个独立的位差错、奇数个差错、突发性差错）

![IMG_4179(1)](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4179(1).jpg)

![image-20241211164223127](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211164223127.png)

7．校验和及其计算方法

假设要发送几个数字，那么这组数字之和的反码称之为校验和。
校验和的思路很简单，先求解出发送方要发送的数据总和，并将总和**求反**作为校验和发送到接收方。如果接收方收到的所有数字之和取反后为0，那么说明收到的数据没有问题，舍弃校验和接收数据，否则丢弃数据。

> 计算步骤：
>
> 为发送的数据求和
> 为和划定长度（长度为4），即将超出的部分移到数字右边，加到该部分上。
> 为结果取反

![微信图片_20241214100838](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214100838.jpg)

## **第11章 数据链路控制**

### 1．**组帧（面向字符协议、面向位协议）**

位于物理层的数据传递是指以信号的形式从源端传输到目的端。物理层提供位同步以保证发送方和接收方能使用相同的位周期和时序。 另一方面，数据链路层需将位组合成帧，并**使帧与帧之间是可识别的**。

成帧的核心功能是为数据传输提供清晰的结构和边界，具体体现为：

1. 将大报文切分成小的帧，便于传输和错误处理。
2. 为每个帧加上地址等控制信息，使得不同目的地的报文能够准确区分并传递。

【固定长度成帧】——不需要定义帧的边界，长度本身可以用作分隔符
【可变长度成帧】

面向字符协议——帧的开始和结尾加一个字节的标记
帧格式：**标记**+头部+可变数量的字符（来自上层的数据）+尾部+**标记**
转义字节：01111101【PPP协议】

> 标记冲突解决：字节填充，在字符标记的前面添加一个字节（换义字符ESC）以跳过该字符标记

![IMG_4332(1)](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4332(1).jpg)

 面向位协议
 帧格式：**标记**+头部+可变数量的位（来自上层的数据）+尾部+**标记**
 特定的标记：01111110【HDLC协议】

> 标记冲突解决：位填充，遇到一个0后面紧跟5个1便添加一个0

![IMG_4331(1)](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4331(1).jpg)

2．流量控制和差错控制的概念

数据链路层最重要的功能就是流量控制和差错控制。流量控制是一系列程序，用来限制发送方在等到确认之前发送的数据数量。

差错控制则基于自动重复请求, 即重传数据。

> ARQ:就是自动请求重发技术，结合了流控和自动重发技术，该技术的主要思想是利用差错检测技术自动对丢失的帧和错误帧请求重发

### 3．**停止等待ARQ、后退N幀ARQ和选择重发ARQ**

停止等待协议（stop-and-waitprotocol），当发送方发出一 个帧后必须停下来直到接收到来自接收方的确认，然后再发送一个帧。

![微信图片_20241214100843](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214100843.jpg)

![image-20241211173740714](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211173740714.png)

![image-20241214103900660](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214103900660.png)

**后退N帧ARQ——有噪声通道**

后退*N*帧*ARQ*协议就是**从出错处重发已发过的*N*个帧**.在后退*N*帧协议中，发送方按照窗口中帧的编号顺序连续发送帧，接收方窗口大小总是1；接收方**只能按顺序接受**，并按**顺序发送应答信号**；对于没有按顺序达到的帧丢弃，以后要重新发送

**发送方窗口大小$$2^m-1$$(一定要小于2^m)，接收方窗口大小为1**

![image-20250109130908526](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20250109130908526.png)

![image-20250109130939242](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20250109130939242.png)

**选择重发ARQ——有噪声通道**

发送方窗口大小≤ $$2^{m-1}$$，接收方窗口大小与发送方一致

![image-20241211180236624](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241211180236624.png)

4．HDLC

高级数据链路控制（HDLC）

> **面向比特**的点到点和多点链路进行通信的协议

5．PPP协议

点对点信道是指一条链路上**只有一个发送端和一个接收端的信道**。**PPP协议是目前使用最广泛的点对点数据链路层协议**，也广泛应用于广域网路由器之间的专用线路。

## **第12章 多路访问**

IEEE 802委员会将数据链路层分为两个子层：逻辑链路控制 (Logical Link Control，LLC) 子层与介质访问控制 (Media Access Control，MAC) 子层。MAC子层负责控制物理介质的访问，并决定哪个设备有权利发送数据。

![image-20241214105553879](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214105553879.png)

1．随机访问：纯ALOHA、时隙ALOHA、

### **CSMA、CSMA/CD、CSMA/CA**、**最小帧长与传播时延和传输时延**

【纯ALOHA】——每个站点有帧要发送，就发送帧

![image-20241214105627127](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214105627127.png)

脆弱时间：可能发生冲突时间的长短。 吞吐量G：一个帧传输时间内系统产生的帧的平均数量。

![image-20241214110217146](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214110217146.png)

【时隙ALOHA】——把时间分割成一段段时隙，强制站点只有在时隙开始之时才能发送。

![image-20241214110453792](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214110453792.png)

![image-20241214110718120](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214110718120.png)

**【载波侦听多路访问CSMA】——要求每一个站点在发送前先要监听介质，以减少冲突发生的概率**

![image-20241214111423034](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214111423034.png)

CMSA的**脆弱时间是传播时间Tp**。这是一个信号从介质的末端到另一端的传播时间。当一个站点发送一个帧，且其他站点也试图在这个时间段内发送帧时，就会发生冲奕。但是，如果帧的第一个位已经到达了介质的末端，其他每个站点都能“听到”这个位，并停止发送。灰色区域为时间和空间上的脆弱区域。

当通道繁忙时，站点应该如何做？

- 持续方法：1-持续、非持续、p-持续

![微信图片_20241214112959](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214112959.jpg)

![image-20241214113053899](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214113053899.png)

**【带冲突检测的载波侦听多路访问CSMA/CD】——边发边听**

所有节点都共享网络传输信道，节点在发送数据之前，首先检测信道是否空闲，如果信道空闲则发送，否则就等待；在发送出

信息后，再对冲突进行检测，当发现冲突时，取消发送。  

**冲突检测时间是最大传播时间的两倍 **   **帧长 = 2 × 传播时间 × 数据速率**

![image-20241214115832218](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214115832218.png)

需要区分什么时候是传输时间什么时候是传播时间。

![微信图片_20241214145320](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214145320.jpg)

**带冲突避免的载波侦听多路访问CSMA/CA**

带冲突避免的载波侦听多路访问CSMA/CA是一种数据传输时避免各站点之间数据传输冲突的算法，其特点是发送包的同时不能检测到信道上有无冲突，只能**尽量“避免**”。通常CSMA/CA**利用ACK信号来避免冲突的发生**，即只有当客户端收到网络上返回的ACK信号后才确认发出的数据已经正确到达目的地。

![image-20250108234417290](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20250108234417290.png)

2．受控访问：预约、轮询、令牌环（了解）

## **第13章 有线局域网：以太网**

1．IEEE标准：数据链路层划分为两个子层：逻辑链路控制层（LLC）和介质访问控制层（MAC）

研究重点是解决局部范围的计算机联网问题，因此只需关注OSI参考模型中的**数据链路层**与**物理层**。

### 2．**标准以太网的MAC子层**：**帧格式、MAC地址、最大最小帧长**、

mac地址与IP地址的区别

![微信图片_20250104170435](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20250104170435.jpg)

编码和解码、10Base5、10 Base 2、10 Base -T、10 Base -F

【帧格式】——最小长度64字节

![image-20241214145726128](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214145726128.png)

**前同步码（8字节）**：以太网帧以前同步码字段开始，前7字节是1和0交替出现的前导码，最后一个字节是**帧前定界符**，结构为10101011。前导码用于“唤醒”接收端，并将它们的时钟和发送方时钟同步。帧前定界符的最后两个比特警告接收端“重要的内容”就要到来了。前导码与帧前定界符在接收后不保留，也不计入帧首部长度。

**目的地址（6字节）**：目的端MAC地址。当目的端收到一个以太网帧，帧的目的地址无论是与目的端地址相同，还是MAC广播地址，它都将该帧的数据字段内容传递给网络层；如果收到具有任何其他MAC地址的帧，则丢弃之。

**源地址（6字节）**：源端的MAC地址。

**类型/长度（2字节）**：类型字段定义以太网使用的网络层协议，长度字段表示数据字段包含的字节数。

**数据字段（46~1500字节）**：**以太网最大帧长是1518字节，最小帧长是64字节**。这意味着IP数据报不能超过1500字节，否则必须进行分片；IP数据报也不能小于46字节，否则必须被填充到46字节。

**CRC（4字节）**：循环冗余检测CRC字段用于判断帧传输是否出错，校验包括目的地址、源地址、长度与数据，前导码与帧前定界符不进行校验。

![微信图片_20241214150458](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214150458.jpg)

**第一个字节的最低位为0则地址是单播地址否则是多播地址    广播地址是多播地址的一个特例，所有位（48位）都是1**

**127.0.0.1是环回测试地址（127开头）   0.0.0.0是特殊的ipv4地址只能作为源地址使用，表示在本网络上的本主机**

**255.255.255.255只能作为目的地址使用，表示只在本网络上进行广播**

以太网物理地址长度为48位。设备的MAC地址（以太网物理地址）具有扁平结构，而且**地址不会随着设备位置的改变而发生变化**。IP地址则具有层次结构，并且当设备移动时，IP地址可能会发生变化。

![image-20241214150857987](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214150857987.png)

编码和解码：所有标准的实现都使用**10Mbps**的数字信号（基带）。在发送方，使用曼彻斯特方案将数据转换成数字信号，在接收方，信号又被转译成曼彻斯特码并被解码成数据。

【10Base5】

传输速度10Mbps，基带传输，传输最大距离500米
粗缆以太网
半双工

【10Base2】

传输速度10Mbps，基带传输，传输最大距离200米
细缆以太网
半双工

【10Base-T】

传输速度10Mbps，基带传输，双绞线
最大长度：100米
双绞线以太网
全双工

【10Base-F】

传输速度10Mbps，基带传输，光纤
最大长度：2000米
光纤以太网
全双工

3．桥接以太网、交换式以太网、全双工以太网

【桥接以太网】

> 存在网桥——作用：提高带宽和分割冲突域

【交换式以太网】

> 存在交换机

【全双工以太网】

> 站点和交换机之间使用两条链路，**专用链路**，**不再需要CSMA/CD协议解决冲突问题**。

![image-20241214152814777](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214152814777.png)

4．快速以太网：MAC子层、拓扑结构、100Base -TX、100Base-FX、100Base –T4

5．千兆以太网：MAC子层、拓扑结构、1000Base -SX、1000Base-LX、1000Base –CX

## 第14章 无线局域网

1．WLAN体系结构与IEEE 802.11标准

无线局域网（WLAN）是支持移动计算与物联网发展的关键技术之一，以微波、激光与红外等无线信道作为传输介质，代替传统局域网中的同轴电缆、双绞线与光纤，实现物理层与介质访问控制MAC子层功能。

IEEE 802.11标准——涵盖物理层和数据链路层。

802.11标准定义使用ISM的2.4GHz频段、最大传输速率为2Mbps的无线局域网物理层与MAC子层协议。

【基本服务集（BSS）】 包含一个AP和若干个移动站点，所有无线站点关联到AP上

> 服务点AP：中央基站

不带AP的BSS称为特别网络，带AP的BSS称为基础网络

【扩展服务集（ESS）】

> 由两个或多个带有AP的BSS组成
> 各个BSS通过一个分布式系统（通常是有线局域网）连接BSS中的AP而组合起来

2．802.11 MAC子层、帧结构
【分布式协调功能DCF】

访问方式：CSMA/CA
需要竞争使用信道

【点协调功能PCF】

集中式的、无竞争的轮询访问方式
PCF的优先级高于DCF

![微信图片_20241214160607](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214160607.jpg)

【帧格式】

IEEE802.11协议定义了3种帧：管理帧、控制帧与数据帧。管理帧用于站点和接入点之间的初始化通信，控制帧用于访问通道和对帧的确认，数据帧携带数据与控制信息

![微信图片_20241214160604](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214160604.jpg)

帧控制（FC）——2字节
D——2字节
地址——有四个地址字段，每个6字节
序列控制——2字节，用于流量控制
帧主体——0~2312字节
FCS——4字节，CRC-32的差错检测序列
【帧类型】
IEEE 802.11定义帧类型：管理帧、控制帧和数据帧

3．802.11 物理层、寻址方式、隐蔽终端和暴露终端

【隐藏站点】——B和C对于A来说是相互隐藏的

CSMA/CA握手中的CTS帧可以避免来自隐藏站点的冲突

![image-20241214161021938](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214161021938.png)

【暴露站点】——站点被限制使用通道，而这个通道是可用的

![image-20241214161251734](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214161251734.png)

## **第15章** **连接局域网、主干网和虚拟局域网**

1．连接设备：无源集线器、

### **中继器、有源集线器**

![微信图片_20241214162351](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241214162351.jpg)

【无源集线器】——工作在物理层以下

集线器是冲突点
【中继器】——工作在物理层

中继器连接一个局域网的各个网段，因此**不能连接两个不同协议的局域网**
中继器转发每一帧，没有过滤能力。中继器能够扩展局域网的物理长度

中继器主要用于放大信号，以延长传输距离
是再生器，重新生成信号，不是放大器

【有源集线器（hub）】——工作在物理层

有源集线器是一个**多端口的中继器**，所有的**端口是一个广播域，也是一个冲突域**

2．连接设备：网桥、**透明网桥**、生成树

【网桥】——工作在物理层和数据链路层

用做物理层设备时，它重新生成接收到的信号。用做数据链路层设备时，它可以检查帧所包含的物理（MAC）地址（源地址
和目标地址）。

所有的端口是一个广播域，每个端口是一个冲突域（需要竞争使用）
**网桥具有过滤能力**，有一个过滤决策的表
可靠性高：网络故障只影响其所在的网段
不改变帧中所包含的物理地址（MAC）
连接局域网

【透明网桥】

是一个它所连接的站点完全**意识不到其存在的网桥**

> 帧能从一个站点转发到另外一个站点
>
> 能够学习帧中的地址，自动建立转发表
>
> 避免形成循环（Loop）问题

【生成树】

从网桥到LAN的跳数为1，而从LAN到网桥的跳数为0

选择 I D IDID 最小的网桥作为根网桥
找到从根网桥到其他每个网桥或LAN的最短路径
最短路径的组合生成了最短的树
转发端口：属于生成树部分的端口
阻塞端口：不属于生成树部分的端口

### 3．连接设备：**二层交换机**

二层交换机也称为**以太网交换机，是一个多端口**。

【两层交换机】——工作在物理层和数据链路层

> 没有通信量的竞争
> 对帧的MAC地址具有过滤决策
> 所有端口是一个广播域，每个端口是一个冲突域

4．连接设备：路由器

【路由器】——工作在物理层、数据链路层和网络层

> 在[硬件](https://marketing.csdn.net/p/3127db09a98e0723b83b2914d9256174?pId=2782&utm_source=glcblog&spm=1001.2101.3001.7020)上实现了路由器的分组转发逻辑
> 基于分组的逻辑地址进行路由转发（路由器通过路由决定数据的转发，转发策略称为路由选择（routing）)
> 每个端口是一个广播域也是一个冲突域

5．连接设备：三层交换机

【三层交换机】——工作在物理层、数据链路层和网络层

> 每个端口是一个广播域也是一个冲突域

### 6．**网关的概念 **   

工作在所有五层或OSI模型全部七层

在**网络层以上**实现**网络互连**，是复杂的网络互连设备。通常指的网关就是**路由器端口的IP**。

### 7．**虚拟局域网的概念及划分方法**

虚拟局域网:**通过软件**而非物理线路来**配置的局域网**

VLAN可基于交换机端口、MAC地址、第三层协议和IP组播等进行划分。

## **第19章 逻辑寻址**

1．分类编制的 IPv4地址：A、B、C、D和E类地址

IPv4 地址 是一个 **32-bit** 的地址，它唯一并通用地**定义了一个连接在因特网上的设备**（如主机或路由器）。

![image-20250109090527499](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20250109090527499.png)

在分类寻址中，地址空间被划为5类：A、B、C、D和E类地址

![img](https://i-blog.csdnimg.cn/blog_migrate/a6b4396404a4855d713670d5d028419f.png)

![image-20241214173947847](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214173947847.png)

![IMG_4339(1)](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4339(1).png)

### 2．**掩码、子网和超网的概念**

默认子网掩码是根据IP地址类别预定义的固定值，用于将IP地址分成网络部分和主机部分。

如果一个组织机构指派A类或B类中 一大块地址，它可**将这些地址划分为几个类组，并赋予每一组为较小的网络,称为子网.**

AB类地址几乎用完。在超网化中，一个组织机构能将几个C类块地址构成更大范围的地址空间。换言之，**将几个网络联合起来构成一个超网（supernet）。**

### 3．**子网划分**

![image-20241214180850965](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214180850965.png)

![image-20241214182840837](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241214182840837.png)

![image-20241215175726318](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215175726318.png)

### 4．**无类别域间路由CIDR**

CIDR**使用各种长度的“网络前缀”(network-prefix)代替分类地址中的网络号和子网号**。CIDR不再使用“子网”的概念而使用网络前缀，IP地址从三级编址又回到了两级编址，其记法是：**IP地址 = {<网络前缀>, <主机号>}**。

CIDR**把网络前缀都相同的连续IP地址组成“CIDR地址块”**，由地址块的起始地址和地址块中的地址数来定义。由于一个CIDR地址块可以表示多个地址，**在路由表中就可利用CIDR地址块来查找目的网络**，使路由表中的一个项目可以表示原来传统分类地址的多个路由，称为**路由聚合**或**构成超网**。

![IMG_4340(1)](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4340(1).png)

![image-20250109003500284](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20250109003500284.png)

![IMG_4341(1)](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4341(1).png)

### 5．**NAT的原理与概念**

为了解决地址短缺，内部可有大量地址，对外通信采用的一个外部格式；能使得大量使用内部专用地址的用户共享外部的全球地址，以访问因特网主机资源

NAPT  网络端口地址转换,它是属于一种多对一的地址转换,它通过使用“ip地址+端口号”的形式进行转换**,使多个内网的用户可以共用一个公网的IP地址来访问外网。**

NAT的工作原理

NAT的基本工作原理包括**源地址转换（SNAT）和目的地址转换（DNAT）**：

- ‌**源地址转换（SNAT）**‌：当内部网络中的设备尝试访问外部网络时，路由器会将数据包的源IP地址转换为公共IP地址。这允许内部设备通过**一个或几个公共IP地址访问互联网**，解决了IPv4地址短缺的问题，并提供了一定的安全性。
- ‌**目的地址转换（DNAT）**‌：当外部网络的数据包到达时，路由器会将数据包的目的IP地址转换成内部网络中的一个私有IP地址。这允许外部用户通过公共IP地址访问内部网络中的特定服务器或设备，实现端口重定向或端口转发。

6．IPv6地址

![微信图片_20241215190242](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241215190242.jpg)

## **第20章 IP协议**

### 1．**IP分组（数据报）的格式**

**固定首部+数据载荷**

![IMG_4342(1)](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4342(1).jpg)

### 2．**分片与MTU**

【MTU】

最大传送单元 : MTU 是链路层可封装数据 的上限
【分片】

更多操作 IP 分组的 MTU 是 1500 字节 , 当网络层的 IP 分组超过 1500 字节 , 此时就要进行分片，将数据报分割，使其能通过不同的网络
根据 首部的 标识 , 标志 , 片偏移（必须为整数） 进行相应处理

当IP数据包在传输过程中，若遇到链路MTU较小的情况，路由器会将其进行分片，然后在目的主机处进行重组。因为目的主机能确保接收到所有分片并按正确顺序重组，符合IP分片和重组的原理。

**例20.9** 到达的一个分组的偏移值是100，而HLEN字段值为5，总长度字段的值是100。试问第一个字节和最后字节的编号是多少？

> 首先要知道HLEN字段表示首部长度，这里HLEN值为5，以4字节为单位，所以首部长度为5×4 = 20字节。总长度字段值是100，意味着整个分组长度是100字节，那么数据部分长度就是100 - 20 = 80字节。偏移值是以8字节为单位，已知偏移值是100，所以该分组之前的数据长度是100×8 = 800字节。第一个字节编号就是800 。最后一个字节编号则是800 + 80 - 1 = 879 。这道题主要考查了对IP分组首部字段含义及相关计算的理解。
>
> 答案是：第一个字节编号是800，最后一个字节编号是879。

3．IPv4校验和

![image-20241215193839840](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215193839840.png)

4．IPv6分组格式

![微信图片_20241215194100](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241215194100.jpg)

5．IPv4到IPv6过渡

1. 隧道技术：两台使用IPv6电脑的报文通过IPv4区域时，IPv6分组封装成IPv4的技术
2. 头部转换：发送方用IPv6，接收方用IPv4，则IPv6头部应该转换为IPv4

## **第21章 地址映射、差错报告和多播**

### 1．ARP：**ARP的原理**、

分组格式、封装、4种操作

逻辑地址映射到物理地址， ARP *\*（\**Address Resolution Protocol）

![image-20241215194430840](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215194430840.png)

![image-20241215201335364](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215201335364.png)

![微信图片_20241215201126](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241215201126.jpg)

### 2．**DHCP的概念**

可以提供静态/动态/自动/人工的地址配置

DHCP 服务器向客户端提供 IP地址、子网掩码、默认网关、DNS 服务器地址等信息，DHCP 服务器通过三种形式为客户端分配IP地址：将一个IP地址固定分配给一个客户端、随机将地址永久性分配给客户端和**随机将地址分配给客户端使用一段时间**，第三种形式最常见。

### 3．**ICMP：ICMP的概念、报文格式、5种差错报告**

ping命令是icmp 请求消息

ICMP 的主要功能是确认**IP 数据报是否成功送达目的地**，**并通知源主机发送过程中 IP 数据报被丢弃的原因**。ICMP这些功能可检查网络是否正常、网络配置是否正确、设备是否异常等信息，方便进行**网络问题诊断**。

![image-20241215194933914](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215194933914.png)

> 当**路由器不能找到路由或主机不能传递数据**时，丢弃这个数据报，然后发送**目的端不可达（Destination Unreachable）报文**。
>
> 源端抑制（ source quench）用来补充流量控制；当路由器或者目的主机中**产生拥塞**时，路由器或者目的主机丢弃数据报，向发送方发送**源端抑制报文**。
>
> TTL减为0时，路由器丢弃数据报，并发送一个**时间超时（Time Exceeded）的消息给源主机，通知其该数据报已被丢弃**。报文的所有分片没有在限定时间内到达（超时），由目的主机发送**时间超时报文**。
>
> IP分组的首部中**产生错误或者二义性时**，路由器或者主机丢弃这个分组，然后向源主机发送**参数问题（Parameter problems）报文。**
>
> 如果路由器发现一条**更优的路径来发送数据**，就会向源主机发送重定向（Redirection）消息，这个消息包含了最合适的路由信息和源数据。

![微信图片_20241215202832](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241215202832.jpg)

4．IGMP的基本概念（了解）

## **第22章 传递、转发和路由选择**

1．转发技术与转发过程

转发是指将分组路由到它的目的端

1. 下一跳方法：路由表只保留下一跳地址
2. 路由方法：保留完整路由信息
3. 特定主机/特定网络方法

### 2．**路由表、地址聚合和最长掩码匹配**

当主机有分组要发送时，或是路由器已收到一个分组要转发时，就要查找路由表以便求得到达最终目的端的路由。

使用 CIDR 时，路由表中的每个项目由“掩码”、“网络地址”、“下一跳地址”和“端口”等组成。在查找路由表时可能会得到不止一个匹配结果，此时应当从匹配结果中选择具有最长掩码的路由。之所以称为最长掩码匹配，是因为这个表项也是路由表中与目的地址的高位匹配得最多的表项。**掩码越长，其地址块就越小，因而路由就越具体**。

![image-20241215204345280](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215204345280.png)

### 3．**路由算法：Dijstra和Bellman-Ford算法**

路由是从某一网络设备出发去往某个目的地所经过的路径。同一条路由可以从不同的路由协议学习到，此时可人为定义协议优先级进行路由优选。**协议优先级越小，越被路由优选。**

Dijstra：找出不在 **T** 中的某个相邻结点，这个相邻结点与 **s** 之间有最小代价路径；

![image-20241215205929482](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215205929482.png)

Bellman-Ford：从给定的源结点找出一条最短路径，该最短路径是从所有最多只含 1 条链路的路径中选择出来的；

![image-20241215210200706](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215210200706.png)

### 4．**单播路由协议：AS的概念、RIP协议和OSPF协议**

自治系统AS（Autonomous System）是处于一个管理机构控制之下的路由器和网络群组。在一个自治系统中的所有路由器必须相互连接，运行相同的路由协议，同时分配同一个自治系统编号。

【RIP】：以距离向量衡量，用于应用层。利用跳数来作为计量标准，每经过一个路由器跳数就加 1。

![image-20241215212547137](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215212547137.png)

【OSPF】：以链路状态衡量，用于传输层 从算法上保证了不会有环路 洪泛

【BGP】：以路径向量衡量，用于应用层

5．多播的概念和多播路由（了解）

## **第23章 UDP、TCP和SCTP**

1．端口、套接字的概念

在传输层，需要一个称为端口号（portnumber）的传输层地址，利用这一地址从目的主机上运行的多个进程中选择相应的进程。目的端口号用于传送，而源端口号用于接收回答。

在选择数据的最终目的端时，IP地址和端口号起着不同的作用。目的 IP地址定义了在世界范围的不同主机中确定一个主机。但主机被选定后，端口号定义了在该特定主机上的多个进程中的一个进程。

![image-20241215232116644](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215232116644.png)

套接字地址：IP地址+端口号，一个TCP连接被一对套接字地址确定

### 2．**UDP协议：UDP协议的概念、数据报结构、校验和计算、UDP的操作**

用户数据报协议（User Datagram Protocol）称为无连接的不可靠的传输层协议。它除了提供进程到进程而不是主机到主机的通信外，没有给IP服务增加任何东西。协议简单，开销小。

![image-20241215232513941](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215232513941.png)

UDP分组称为用户数据报，有8字节的固定头部
固定头部：源端口号、目的端口号、长度（定义数据报总长度）、校检和
UDP被封装成IP数据报：伪头部是IP分组的头部一部分，而头部是UDP的一部分
数据（必须进行填充是数据是16位的倍数）

![image-20241215233118004](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215233118004.png)

【校检和的计算】——针对UDP的头部加上去除填充的数据

每两个字节模2求和，最后结果取反得到校检和

![image-20241215234223350](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241215234223350.png)

### 3．**TCP：TCP的特点与服务、报文格式**

TCP（Transmission Control Protocol）是一个面向连接的协议，它在两个TCP之间建立一个虚拟连接来发送数据。

> 全双工、面向连接、可靠的、提供流量控制和差错控制
> 建立虚拟连接，逻辑上的连接
> TCP允许发送进程以字节流的形式传递数据，并设置有发送和接受缓冲区
> TCP将多个字节组合在一起成为一个分组，称为段
> 段的头部包含有序号、确认号两个字段（序号指字节序号开始于一个随机数编号而非段序号）
> 段序号指该段的第一个字节的序号，段中确认字段定义了接收方预期接受的下一字节的编号

![微信图片_20241216004139](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241216004139.jpg)

![image-20241216004246897](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241216004246897.png)

TCP VS UDP  

![微信图片_20241216090208](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241216090208.jpg)

### 4．**TCP连接建立和拆除**

【连接建立（三次握手）】——SYN表示序列同步号

客户发送第一个段SYN段，用于序列号同步，不携带数据但占用一个序列号
服务器发送第二个段，SYN+ACK段，SYN表示另一方向通信的SYN段（全双工），ACK表示对第一个SYN的确认，不携带数据但占用一个序列号
客户发送第三个段，ACK段进行确认，不携带数据也不占用序列号
![image-20241216090736370](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241216090736370.png)

【终止连接（三次握手）】——将SYN换做FIN

如果FIN段不携带数据，则占用一个序列号。如果 FIN + ACK 段没有携带数据，也占用一个序列号。ACK段如果不携带数据，则不占用序列号。

![image-20241216091135822](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241216091135822.png)

### 5．**TCP流量控制（信贷滑窗协议）**

流量控制就是让发送方的发送速率不要太快，既要让接收方来得及接收，也不要使网络发生拥塞。利用TCP的滑动窗口机制可以很方便地在TCP连接上实现流量控制。

>面向字节的、窗口大小可变
>窗口的张开、合拢和收缩由接收方控制

TCP窗口受接收方窗口（rwnd）和拥塞窗口（cwnd）共同的影响，取两者中的最小值；$$窗口大小=min\{rwnd，cwnd\}$$

![微信图片_20241216092442](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241216092442.jpg)

![微信图片_20250104145157](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20250104145157.jpg)

![微信图片_20250104145206](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20250104145206.jpg)

### 6．**TCP差错控制**

TCP是可靠的传输层协议，使用差错控制来提供可靠性。差错控制包括检测出报文的差错、丢失、失序和重复并纠正

![image-20241216094648092](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241216094648092.png)

【差错控制】——校检和、确认和重传

- ACK段不占用序列号，不需要确认
- 超时重传：重传计时器到时，快速重传：发送方接收到三个重复的ACK
- 数据可以失序到达，并被接受的TCP暂时存储，但是TCP确保传递给进程的段是无失序的

## **第24章 拥塞控制和服务质量**

### 1．**TCP拥塞控制（慢启动、拥塞避免、快速重传）**

拥塞控制指的是控制拥塞和使载荷低于网络容量的机制和技术。

【慢启动过程】

每次接收到一个确认时，窗口大小增加一个MSS值
以2的幂次增加，单位是MSS值

在慢启动算法中，拥塞窗口大小按指数规律增长直到达到阈值
【拥塞避免：加性增加】

当拥塞窗口达到慢速启动的阈值时，慢速启动阶段停止，加性增加阶段开始
每次整个窗口所有段都被确认时，拥塞窗口才增加1

拥塞避免算法中，拥塞窗口大小加性增加直到检测到拥塞
【拥塞检测：乘性减少】

发生拥塞时，拥塞窗口阈值下降一半
如果计时器到时，开始一个新的慢速启动阶段 

如果检测出三个ACK，开始一个新的拥塞避免阶段 

![image-20241216100136235](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241216100136235.png)

![微信图片_20241216101517](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241216101517.jpg)

2．服务质量（QoS）的概念：FIFO队列、通信量整型（了解）

【服务质量概念】数据流所追求的某种目标

## **第25章 域名系统**

1．域名空间、通用域、国家域和反向域

![image-20241216101731647](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241216101731647.png)

### 2．**DNS工作原理**

DNS（**D**omain**N**ame**S**ystem，域名系统），其主要任务是根据域名查出对应的 IP 地址。

![image-20241216103037029](C:\Users\chenlu\AppData\Roaming\Typora\typora-user-images\image-20241216103037029.png)

3．域名解析方式

【递归解析】
将客户机的请求不断传递给父服务器并等待响应，查询得到解析后响应后向传送直到最终到达发出请求的客户机
【迭代解析】
服务器或者发送应答，或者返回另一个服务器的IP地址，由客户机负责再次发送请求

4．DNS报文

【查询报文】——头部+查询记录
【响应报文】——头部+查询记录+响应记录+授权部分+附加部分

## **第26章 远程登录、电子邮件和文件传输**

1．Telnet的基本概念

2．电子邮件：电子邮件的架构、邮件报文、SMTP和MIME、POP3和IMAP

![IMG_4191](C:\Users\chenlu\Pictures\Saved Pictures\IMG_4191.jpg)

**(1) 邮件发送协议与邮件接收协议均属于应用层协议，其传输层采用的协议是什么？采用该传输层协议对邮件收发过程有何益处？**

1. 传输层协议：
   - 邮件发送协议 **SMTP** 和邮件接收协议 **POP3** 都使用 **TCP（传输控制协议）** 作为传输层协议。
2. 原因及益处：
   - **可靠性：** TCP 是一种面向连接的协议，能够提供可靠的数据传输，确保邮件内容在传输过程中不会丢失或损坏。
   - **顺序控制：** TCP 可以保证数据包按发送顺序到达接收方，确保邮件内容的完整性。
   - **流量控制与拥塞控制：** TCP 具有流量控制和拥塞控制机制，可以避免网络拥塞，提高传输效率。

**(2) 接收邮件除题中所用的 POP3 协议外，还有一个接收邮件的协议是什么？它与 POP3 有何不同？**

1. **另一个接收邮件的协议：**
   - 除了 **POP3** 协议外，接收邮件还可以使用 **IMAP（Internet Message Access Protocol）**。
2. **POP3 与 IMAP 的区别：**
   - POP3
     - 通常是将邮件从服务器下载到本地设备，然后在本地进行管理。
     - 下载后，服务器上邮件通常会被删除（也可以配置保留）。
     - 更适合在单一设备上查看和管理邮件。
   - IMAP
     - 邮件存储在服务器上，用户在本地操作的是服务器上的邮件副本。
     - 支持多设备同步，用户在不同设备上的操作（如删除、标记已读等）会同步到服务器。
     - 更适合在多设备之间管理邮件。

**(3) 接收方邮件服务器为 xidian.edu.cn，但实际访问该服务器需要知道其 IP 地址，该服务器的 IP 地址通过哪种应用层协议可以获取？该应用层协议的存在解决了什么问题？**

1. **获取 IP 地址的应用层协议：**
   - 通过 **DNS（Domain Name System，域名系统）** 协议获取服务器的 IP 地址。
2. **DNS 的作用：**
   - **域名解析：** 将易于记忆的域名（如 `xidian.edu.cn`）转换为对应的 IP 地址（如 `202.117.x.x`），以便于客户端与服务器之间的通信。
   - 解决的问题：
     - 用户不需要记忆复杂的 IP 地址，只需记住易读的域名。
     - 提供了灵活性，服务器的 IP 地址可以随时更改，而不影响用户访问域名。

**3．文件传输：FTP的架构、FTP的连接、FTP的传输方式**

![微信图片_20241216103925](C:\Users\chenlu\Pictures\Saved Pictures\微信图片_20241216103925.jpg)